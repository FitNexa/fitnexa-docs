"use strict";(globalThis.webpackChunkfitnexa_docs=globalThis.webpackChunkfitnexa_docs||[]).push([[542],{3830(e,n,s){s.r(n),s.d(n,{assets:()=>c,contentTitle:()=>d,default:()=>h,frontMatter:()=>o,metadata:()=>t,toc:()=>l});const t=JSON.parse('{"id":"dev-workflows/monorepo-scripts","title":"Monorepo Scripts","description":"Available scripts in the root package.json for development and builds","source":"@site/docs/dev-workflows/monorepo-scripts.md","sourceDirName":"dev-workflows","slug":"/dev-workflows/monorepo-scripts","permalink":"/docs/dev-workflows/monorepo-scripts","draft":false,"unlisted":false,"editUrl":"https://github.com/FitNexa/fitnexa-platform/tree/main/fitnexa-docs/docs/dev-workflows/monorepo-scripts.md","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"sidebar_position":2,"title":"Monorepo Scripts","description":"Available scripts in the root package.json for development and builds"},"sidebar":"tutorialSidebar","previous":{"title":"Contributing","permalink":"/docs/dev-workflows/contributing"},"next":{"title":"Environment Setup","permalink":"/docs/dev-workflows/environment-setup"}}');var r=s(4848),i=s(8453);const o={sidebar_position:2,title:"Monorepo Scripts",description:"Available scripts in the root package.json for development and builds"},d="Monorepo Scripts",c={},l=[{value:"Management Scripts",id:"management-scripts",level:2},{value:"Testing Scripts",id:"testing-scripts",level:2},{value:"Deployment Scripts",id:"deployment-scripts",level:2},{value:"deploy-uat.sh",id:"deploy-uatsh",level:3},{value:"ESM Module Resolution",id:"esm-module-resolution",level:2}];function a(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,i.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"monorepo-scripts",children:"Monorepo Scripts"})}),"\n",(0,r.jsxs)(n.p,{children:["FitNexa uses a unified script system in the root ",(0,r.jsx)(n.code,{children:"package.json"})," to manage the multi-repo monorepo."]}),"\n",(0,r.jsx)(n.h2,{id:"management-scripts",children:"Management Scripts"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Script"}),(0,r.jsx)(n.th,{children:"Description"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"npm run setup"})}),(0,r.jsx)(n.td,{children:"Install all dependencies across all apps"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"npm run build:shared"})}),(0,r.jsxs)(n.td,{children:["Build the ",(0,r.jsx)(n.code,{children:"@fitnexa/shared"})," package (required first)"]})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"npm run easy-start"})}),(0,r.jsx)(n.td,{children:"Interactive setup/start wizard"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"npm run easy-kill"})}),(0,r.jsx)(n.td,{children:"Kill all running FitNexa processes"})]})]})]}),"\n",(0,r.jsx)(n.h2,{id:"testing-scripts",children:"Testing Scripts"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Script"}),(0,r.jsx)(n.th,{children:"Description"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"npm run test:all"})}),(0,r.jsx)(n.td,{children:"Run all unit tests"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"npm run test:integration"})}),(0,r.jsx)(n.td,{children:"Run platform-wide integration tests"})]})]})]}),"\n",(0,r.jsx)(n.h2,{id:"deployment-scripts",children:"Deployment Scripts"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Script"}),(0,r.jsx)(n.th,{children:"Location"}),(0,r.jsx)(n.th,{children:"Description"})]})}),(0,r.jsx)(n.tbody,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"scripts/deploy-uat.sh"})}),(0,r.jsx)(n.td,{children:"Root"}),(0,r.jsx)(n.td,{children:"Deploy backend services to VPS via Docker Compose"})]})})]}),"\n",(0,r.jsx)(n.h3,{id:"deploy-uatsh",children:"deploy-uat.sh"}),"\n",(0,r.jsxs)(n.p,{children:["The deployment script is executed on the VPS by the GitHub Actions ",(0,r.jsx)(n.code,{children:"deploy-backend.yml"})," workflow. It:"]}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["Locates ",(0,r.jsx)(n.code,{children:"docker-compose.uat.deploy.yml"})," in the ",(0,r.jsx)(n.code,{children:"fitnexa-backend/"})," directory"]}),"\n",(0,r.jsxs)(n.li,{children:["Loads environment variables from ",(0,r.jsx)(n.code,{children:"fitnexa-backend/.env.uat"})]}),"\n",(0,r.jsxs)(n.li,{children:["Runs ",(0,r.jsx)(n.code,{children:"docker compose up -d --build --remove-orphans"})]}),"\n",(0,r.jsx)(n.li,{children:"Reports container status"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"The script expects the following directory structure on the VPS:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"/deploy-path/\n  fitnexa-backend/\n    docker-compose.uat.deploy.yml\n    .env.uat\n    services/\n  fitnexa-shared/\n  fitnexa-admin/\n  scripts/\n    deploy-uat.sh\n"})}),"\n",(0,r.jsx)(n.h2,{id:"esm-module-resolution",children:"ESM Module Resolution"}),"\n",(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.code,{children:"@fitnexa/shared"})," package uses ES Modules. All relative imports in TypeScript source files must include the ",(0,r.jsx)(n.code,{children:".js"})," extension to ensure Node.js can resolve them at runtime after compilation:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"// Correct\nimport { ConfigManager } from '../config/config-manager.js';\n\n// Incorrect (will cause ERR_MODULE_NOT_FOUND at runtime)\nimport { ConfigManager } from '../config/config-manager';\n"})}),"\n",(0,r.jsxs)(n.p,{children:["This applies to all files in ",(0,r.jsx)(n.code,{children:"fitnexa-shared/src/"})," including server exports, middleware, utilities, and type re-exports."]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsxs)(n.p,{children:["Related: ",(0,r.jsx)(n.a,{href:"/docs/overview/quick-start",children:"Quick Start"})," | ",(0,r.jsx)(n.a,{href:"/docs/dev-workflows/environment-setup",children:"Environment Variables"})," | ",(0,r.jsx)(n.a,{href:"/docs/infrastructure/uat-setup",children:"UAT Setup"})]})]})}function h(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(a,{...e})}):a(e)}},8453(e,n,s){s.d(n,{R:()=>o,x:()=>d});var t=s(6540);const r={},i=t.createContext(r);function o(e){const n=t.useContext(i);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:o(e.components),t.createElement(i.Provider,{value:n},e.children)}}}]);