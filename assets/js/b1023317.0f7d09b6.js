"use strict";(globalThis.webpackChunkfitnexa_docs=globalThis.webpackChunkfitnexa_docs||[]).push([[3348],{1088(e,n,s){s.r(n),s.d(n,{assets:()=>o,contentTitle:()=>c,default:()=>h,frontMatter:()=>a,metadata:()=>i,toc:()=>d});const i=JSON.parse('{"id":"backend/ARCHITECTURE","title":"Backend Architecture Deep Dive","description":"The FitNexa backend is a distributed system designed for scalability, isolation, and observability.","source":"@site/docs/backend/ARCHITECTURE.md","sourceDirName":"backend","slug":"/backend/ARCHITECTURE","permalink":"/fitnexa-docs/docs/backend/ARCHITECTURE","draft":false,"unlisted":false,"editUrl":"https://github.com/FitNexa/fitnexa-platform/tree/main/fitnexa-docs/docs/backend/ARCHITECTURE.md","tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"FitNexa Decision Log","permalink":"/fitnexa-docs/docs/ai_governance/DECISION_LOG"},"next":{"title":"Backend Services Catalog","permalink":"/fitnexa-docs/docs/backend/SERVICES_CATALOG"}}');var r=s(4848),t=s(8453);const a={},c="Backend Architecture Deep Dive",o={},d=[{value:"\ud83d\udee0\ufe0f Tech Stack",id:"\ufe0f-tech-stack",level:2},{value:"\ud83d\udce6 Service Design Patterns",id:"-service-design-patterns",level:2},{value:"1. Database per Service",id:"1-database-per-service",level:3},{value:"2. API Gateway (Gatekeeper)",id:"2-api-gateway-gatekeeper",level:3},{value:"3. Shared Core Library (<code>@fitnexa/shared</code>)",id:"3-shared-core-library-fitnexashared",level:3},{value:"\ud83d\udce1 Communication Patterns",id:"-communication-patterns",level:2},{value:"Synchronous (REST)",id:"synchronous-rest",level:3},{value:"Asynchronous (Events)",id:"asynchronous-events",level:3},{value:"Real-time (WebSockets)",id:"real-time-websockets",level:3},{value:"\ud83d\udd17 Related Links",id:"-related-links",level:2}];function l(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",p:"p",strong:"strong",ul:"ul",...(0,t.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"backend-architecture-deep-dive",children:"Backend Architecture Deep Dive"})}),"\n",(0,r.jsx)(n.p,{children:"The FitNexa backend is a distributed system designed for scalability, isolation, and observability."}),"\n",(0,r.jsx)(n.h2,{id:"\ufe0f-tech-stack",children:"\ud83d\udee0\ufe0f Tech Stack"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Runtime"}),": Node.js (TypeScript)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Framework"}),": Express.js"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Database"}),": PostgreSQL with Prisma ORM"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Messaging"}),": RabbitMQ (amqplib)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Caching"}),": Redis (ioredis)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Logging"}),": Winston + MongoDB"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Shared Library"}),": ",(0,r.jsx)(n.code,{children:"@fitnexa/shared"})," (Custom internal package)"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"-service-design-patterns",children:"\ud83d\udce6 Service Design Patterns"}),"\n",(0,r.jsx)(n.h3,{id:"1-database-per-service",children:"1. Database per Service"}),"\n",(0,r.jsxs)(n.p,{children:["Each microservice owns its own database schema (e.g., ",(0,r.jsx)(n.code,{children:"fitnexa_identity"}),", ",(0,r.jsx)(n.code,{children:"fitnexa_gym"}),"). This ensures that a schema change in one service never breaks another."]}),"\n",(0,r.jsx)(n.h3,{id:"2-api-gateway-gatekeeper",children:"2. API Gateway (Gatekeeper)"}),"\n",(0,r.jsx)(n.p,{children:"The Gateway (Port 3000) acts as the single entry point. It handles:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Routing"}),": Mapping client requests to downstream services."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Health Monitoring"}),": Aggregating readiness/liveness of all services."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Cross-Component Auth"}),": (Future) Centralized token validation."]}),"\n"]}),"\n",(0,r.jsxs)(n.h3,{id:"3-shared-core-library-fitnexashared",children:["3. Shared Core Library (",(0,r.jsx)(n.code,{children:"@fitnexa/shared"}),")"]}),"\n",(0,r.jsx)(n.p,{children:"To avoid code duplication, common logic is moved to a local shared package:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Middleware"}),": Error handling, correlation IDs, performance monitoring."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Utils"}),": Logger factory (Winston), RabbitMQ transports."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Types"}),": Shared interfaces for users, gyms, and events."]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"-communication-patterns",children:"\ud83d\udce1 Communication Patterns"}),"\n",(0,r.jsx)(n.h3,{id:"synchronous-rest",children:"Synchronous (REST)"}),"\n",(0,r.jsx)(n.p,{children:"Used for immediate requests where a response is required (e.g., Login, Fetching Workouts)."}),"\n",(0,r.jsx)(n.h3,{id:"asynchronous-events",children:"Asynchronous (Events)"}),"\n",(0,r.jsx)(n.p,{children:"Used for non-blocking operations to improve resilience and performance:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Logging"}),": Services publish logs to the ",(0,r.jsx)(n.code,{children:"logs"})," exchange in RabbitMQ."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Cross-Service Sync"}),": (e.g., When a user is deleted in Identity, notify other services)."]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"real-time-websockets",children:"Real-time (WebSockets)"}),"\n",(0,r.jsxs)(n.p,{children:["Handled via ",(0,r.jsx)(n.code,{children:"socket.io"})," in specific services like ",(0,r.jsx)(n.strong,{children:"Messaging"})," and ",(0,r.jsx)(n.strong,{children:"Squad Service"})," for instant notifications and chat."]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"-related-links",children:"\ud83d\udd17 Related Links"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.a,{href:"/fitnexa-docs/docs/backend/SERVICES_CATALOG",children:"Services Catalog"})})," - Port mappings and specific logic."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.a,{href:"/fitnexa-docs/docs/infrastructure/LOGGING_&_OBSERVABILITY",children:"Infrastructure Layout"})})," - Details on RabbitMQ and Mongo."]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(l,{...e})}):l(e)}},8453(e,n,s){s.d(n,{R:()=>a,x:()=>c});var i=s(6540);const r={},t=i.createContext(r);function a(e){const n=i.useContext(t);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:a(e.components),i.createElement(t.Provider,{value:n},e.children)}}}]);