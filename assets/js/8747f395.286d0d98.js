"use strict";(globalThis.webpackChunkfitnexa_docs=globalThis.webpackChunkfitnexa_docs||[]).push([[7252],{298(e,i,n){n.r(i),n.d(i,{assets:()=>c,contentTitle:()=>l,default:()=>o,frontMatter:()=>t,metadata:()=>d,toc:()=>a});const d=JSON.parse('{"id":"features/gym-onboarding-flow","title":"Gym Onboarding Flow","description":"End-to-end flow from landing page preview to branded UAT APK download","source":"@site/docs/features/gym-onboarding-flow.md","sourceDirName":"features","slug":"/features/gym-onboarding-flow","permalink":"/docs/features/gym-onboarding-flow","draft":false,"unlisted":false,"editUrl":"https://github.com/FitNexa/fitnexa-platform/tree/main/fitnexa-docs/docs/features/gym-onboarding-flow.md","tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"sidebar_position":1,"title":"Gym Onboarding Flow","description":"End-to-end flow from landing page preview to branded UAT APK download"}}');var s=n(4848),r=n(8453);const t={sidebar_position:1,title:"Gym Onboarding Flow",description:"End-to-end flow from landing page preview to branded UAT APK download"},l="Gym Onboarding Flow",c={},a=[{value:"Overview",id:"overview",level:2},{value:"Step 1 - Landing Page Preview",id:"step-1---landing-page-preview",level:2},{value:"Step 2 - Onboarding Wizard",id:"step-2---onboarding-wizard",level:2},{value:"Step 3 - Backend Orchestration",id:"step-3---backend-orchestration",level:2},{value:"Email Service",id:"email-service",level:3},{value:"GitHub Build Service",id:"github-build-service",level:3},{value:"Step 4 - Account Activation",id:"step-4---account-activation",level:2},{value:"Step 5 - Gym Admin Dashboard",id:"step-5---gym-admin-dashboard",level:2},{value:"Dashboard",id:"dashboard",level:3},{value:"Gym Setup Page",id:"gym-setup-page",level:3},{value:"Mobile App Build",id:"mobile-app-build",level:3},{value:"Step 6 - APK Build Pipeline",id:"step-6---apk-build-pipeline",level:2},{value:"Trigger",id:"trigger",level:3},{value:"Build Workflow",id:"build-workflow",level:3},{value:"Webhook",id:"webhook",level:3},{value:"Environment Variables",id:"environment-variables",level:2},{value:"Wizard Service",id:"wizard-service",level:3},{value:"API Endpoints",id:"api-endpoints",level:2},{value:"Database Models",id:"database-models",level:2},{value:"WizardSession",id:"wizardsession",level:3},{value:"ActivationToken",id:"activationtoken",level:3},{value:"BuildRequest",id:"buildrequest",level:3}];function h(e){const i={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",mermaid:"mermaid",ol:"ol",p:"p",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(i.header,{children:(0,s.jsx)(i.h1,{id:"gym-onboarding-flow",children:"Gym Onboarding Flow"})}),"\n",(0,s.jsx)(i.p,{children:"The gym onboarding flow is the core conversion pipeline of FitNexa. It takes a potential gym client from their first visit on the landing page all the way through to downloading a branded, testable Android APK of their own gym app."}),"\n",(0,s.jsx)(i.h2,{id:"overview",children:"Overview"}),"\n",(0,s.jsx)(i.mermaid,{value:"sequenceDiagram\n    participant L as Landing Page\n    participant O as Onboarding Wizard\n    participant W as Wizard Service\n    participant I as Identity Service\n    participant G as Gym Service\n    participant E as Email (SMTP)\n    participant A as Gym Admin\n    participant GH as GitHub Actions\n\n    L->>O: Start Your Build CTA\n    O->>W: POST /wizard/onboard\n    W->>G: Create gym\n    W->>I: Create admin (INACTIVE)\n    W->>W: Create activation token\n    W->>E: Send activation email\n    E--\x3e>O: User receives email\n\n    Note over E,A: User clicks activation link\n    E->>O: /activate?token=xxx\n    O->>W: POST /wizard/activate\n    W->>I: Activate user\n\n    Note over A: User logs in\n    A->>W: PUT /wizard/sessions/:id\n    A->>W: POST /wizard/builds/request\n    W->>GH: repository_dispatch\n    GH--\x3e>W: POST /webhooks/build-complete\n    A->>A: Download APK"}),"\n",(0,s.jsx)(i.h2,{id:"step-1---landing-page-preview",children:"Step 1 - Landing Page Preview"}),"\n",(0,s.jsxs)(i.p,{children:[(0,s.jsx)(i.strong,{children:"App"}),": ",(0,s.jsx)(i.code,{children:"fitnexa-landing"})]}),"\n",(0,s.jsxs)(i.p,{children:["The landing page features an interactive ",(0,s.jsx)(i.strong,{children:"BrandPreview"})," component where visitors can:"]}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsx)(i.li,{children:"Enter a gym name"}),"\n",(0,s.jsx)(i.li,{children:"Pick a primary colour (6 presets or custom hex)"}),"\n",(0,s.jsx)(i.li,{children:"Toggle between mobile and desktop preview"}),"\n",(0,s.jsx)(i.li,{children:"See a live mockup of both the branded mobile app and the admin dashboard"}),"\n"]}),"\n",(0,s.jsxs)(i.p,{children:["A ",(0,s.jsx)(i.strong,{children:"How It Works"})," section below the preview shows the four-step journey:"]}),"\n",(0,s.jsxs)(i.ol,{children:["\n",(0,s.jsx)(i.li,{children:"Build Your Brand"}),"\n",(0,s.jsx)(i.li,{children:"Complete Onboarding"}),"\n",(0,s.jsx)(i.li,{children:"Customise in Dashboard"}),"\n",(0,s.jsx)(i.li,{children:"Generate and Test APK"}),"\n"]}),"\n",(0,s.jsxs)(i.p,{children:['A "Start Building Now" CTA button passes the chosen ',(0,s.jsx)(i.code,{children:"gymName"})," and ",(0,s.jsx)(i.code,{children:"primaryColor"})," as query params to the onboarding wizard."]}),"\n",(0,s.jsxs)(i.p,{children:[(0,s.jsx)(i.strong,{children:"Key files"}),": ",(0,s.jsx)(i.code,{children:"src/components/BrandPreview.tsx"}),", ",(0,s.jsx)(i.code,{children:"src/pages/Home.tsx"})]}),"\n",(0,s.jsx)(i.h2,{id:"step-2---onboarding-wizard",children:"Step 2 - Onboarding Wizard"}),"\n",(0,s.jsxs)(i.p,{children:[(0,s.jsx)(i.strong,{children:"App"}),": ",(0,s.jsx)(i.code,{children:"fitnexa-admin/onboarding"})]}),"\n",(0,s.jsx)(i.p,{children:"A multi-step wizard collects everything needed to create a new gym:"}),"\n",(0,s.jsxs)(i.table,{children:[(0,s.jsx)(i.thead,{children:(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.th,{children:"Step"}),(0,s.jsx)(i.th,{children:"Fields"})]})}),(0,s.jsxs)(i.tbody,{children:[(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"1. Gym Identity"}),(0,s.jsx)(i.td,{children:"Name, type, address"})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"2. Branding"}),(0,s.jsx)(i.td,{children:"Primary colour (pre-populated from landing)"})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"3. Features"}),(0,s.jsx)(i.td,{children:"Toggle modules: nutrition, squads, challenges, workouts, check-in, marketing"})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"4. Admin Account"}),(0,s.jsx)(i.td,{children:"Name, email, phone"})]})]})]}),"\n",(0,s.jsxs)(i.p,{children:["On submit the frontend calls ",(0,s.jsx)(i.code,{children:"POST /wizard/onboard"}),"."]}),"\n",(0,s.jsxs)(i.p,{children:[(0,s.jsx)(i.strong,{children:"Key files"}),": ",(0,s.jsx)(i.code,{children:"src/features/onboarding/components/OnboardingWizard.tsx"}),", ",(0,s.jsx)(i.code,{children:"src/features/onboarding/context/OnboardingContext.tsx"})]}),"\n",(0,s.jsx)(i.h2,{id:"step-3---backend-orchestration",children:"Step 3 - Backend Orchestration"}),"\n",(0,s.jsxs)(i.p,{children:[(0,s.jsx)(i.strong,{children:"Service"}),": ",(0,s.jsx)(i.code,{children:"wizard-service"})]}),"\n",(0,s.jsxs)(i.p,{children:["The ",(0,s.jsx)(i.code,{children:"OnboardingOrchestrator"})," executes the following in order:"]}),"\n",(0,s.jsxs)(i.ol,{children:["\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.strong,{children:"Create gym"})," via ",(0,s.jsx)(i.code,{children:"GymServiceClient.createGym()"})," with branding config"]}),"\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.strong,{children:"Create admin user"})," via ",(0,s.jsx)(i.code,{children:"IdentityServiceClient.createGymAdmin()"})," with status ",(0,s.jsx)(i.code,{children:"INACTIVE"})]}),"\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.strong,{children:"Generate activation token"})," (random 64-char hex, 24h expiry)"]}),"\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.strong,{children:"Create wizard session"})," (persists all onboarding data as JSON)"]}),"\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.strong,{children:"Send activation email"})," via ",(0,s.jsx)(i.code,{children:"NodemailerEmailService"})," (SMTP)"]}),"\n"]}),"\n",(0,s.jsx)(i.p,{children:"If admin creation fails, the orchestrator compensates by deleting the gym (saga pattern)."}),"\n",(0,s.jsx)(i.h3,{id:"email-service",children:"Email Service"}),"\n",(0,s.jsxs)(i.p,{children:["The ",(0,s.jsx)(i.code,{children:"NodemailerEmailService"})," uses Nodemailer to send two types of emails:"]}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.strong,{children:"Activation email"}),": Contains a styled HTML button linking to the activation page"]}),"\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.strong,{children:"Welcome email"}),": Sent after activation, links to the gym admin dashboard"]}),"\n"]}),"\n",(0,s.jsxs)(i.p,{children:["When the ",(0,s.jsx)(i.code,{children:"SMTP_PASS"})," env var is not set, the service falls back to ",(0,s.jsx)(i.code,{children:"MockEmailService"})," which logs to console."]}),"\n",(0,s.jsx)(i.h3,{id:"github-build-service",children:"GitHub Build Service"}),"\n",(0,s.jsxs)(i.p,{children:["The ",(0,s.jsx)(i.code,{children:"GitHubBuildService"})," uses ",(0,s.jsx)(i.code,{children:"@octokit/rest"})," to trigger GitHub Actions via ",(0,s.jsx)(i.code,{children:"repository_dispatch"})," events. When ",(0,s.jsx)(i.code,{children:"GITHUB_TOKEN"})," is not set, the service falls back to ",(0,s.jsx)(i.code,{children:"MockBuildService"}),"."]}),"\n",(0,s.jsx)(i.h2,{id:"step-4---account-activation",children:"Step 4 - Account Activation"}),"\n",(0,s.jsx)(i.p,{children:"The activation email contains an HTML template with a button linking to the onboarding app's activation route with the token as a query parameter."}),"\n",(0,s.jsx)(i.p,{children:"The activation page:"}),"\n",(0,s.jsxs)(i.ol,{children:["\n",(0,s.jsxs)(i.li,{children:["Validates the token via ",(0,s.jsx)(i.code,{children:"GET /wizard/activate/:token"})]}),"\n",(0,s.jsx)(i.li,{children:"Lets the user set a password"}),"\n",(0,s.jsxs)(i.li,{children:["Activates the account via ",(0,s.jsx)(i.code,{children:"POST /wizard/activate"})]}),"\n",(0,s.jsx)(i.li,{children:"Redirects to the gym admin login page"}),"\n"]}),"\n",(0,s.jsx)(i.h2,{id:"step-5---gym-admin-dashboard",children:"Step 5 - Gym Admin Dashboard"}),"\n",(0,s.jsxs)(i.p,{children:[(0,s.jsx)(i.strong,{children:"App"}),": ",(0,s.jsx)(i.code,{children:"fitnexa-admin/gym-admin"})]}),"\n",(0,s.jsx)(i.p,{children:"After login, the gym admin sees their personalised dashboard."}),"\n",(0,s.jsx)(i.h3,{id:"dashboard",children:"Dashboard"}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsx)(i.li,{children:"Overview widgets (occupancy, members, check-ins, revenue)"}),"\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.strong,{children:"WizardReview"})," component showing build status"]}),"\n"]}),"\n",(0,s.jsx)(i.h3,{id:"gym-setup-page",children:"Gym Setup Page"}),"\n",(0,s.jsxs)(i.p,{children:["Located at ",(0,s.jsx)(i.code,{children:"/:gymId/setup"}),". Provides a tabbed editor with three sections:"]}),"\n",(0,s.jsxs)(i.table,{children:[(0,s.jsx)(i.thead,{children:(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.th,{children:"Tab"}),(0,s.jsx)(i.th,{children:"Fields"})]})}),(0,s.jsxs)(i.tbody,{children:[(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"Branding"}),(0,s.jsx)(i.td,{children:"Gym name, primary/secondary colour (10 presets plus custom), logo URL with live preview"})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"Features"}),(0,s.jsx)(i.td,{children:"Toggle 8 modules (nutrition, squads, challenges, workouts, check-in, marketing, store, AI scanner)"})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"Connections"}),(0,s.jsx)(i.td,{children:"Instagram, Facebook, support email"})]})]})]}),"\n",(0,s.jsxs)(i.p,{children:["Changes are saved to the wizard session via ",(0,s.jsx)(i.code,{children:"PUT /wizard/sessions/:id"}),"."]}),"\n",(0,s.jsxs)(i.p,{children:[(0,s.jsx)(i.strong,{children:"Key files"}),": ",(0,s.jsx)(i.code,{children:"src/features/onboarding/components/GymSetup.tsx"}),", ",(0,s.jsx)(i.code,{children:"src/shared/components/Layout.tsx"})]}),"\n",(0,s.jsx)(i.h3,{id:"mobile-app-build",children:"Mobile App Build"}),"\n",(0,s.jsxs)(i.p,{children:["The ",(0,s.jsx)(i.strong,{children:"WizardReview"})," component lets the admin:"]}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsx)(i.li,{children:'Click "Request UAT Build" to trigger an APK build'}),"\n",(0,s.jsx)(i.li,{children:"See real-time build status (polls every 8 seconds while QUEUED or BUILDING)"}),"\n",(0,s.jsx)(i.li,{children:"Download the APK or scan a QR code when the build succeeds"}),"\n",(0,s.jsx)(i.li,{children:'Click "Go Live" to enter Stripe checkout for production deployment'}),"\n"]}),"\n",(0,s.jsx)(i.h2,{id:"step-6---apk-build-pipeline",children:"Step 6 - APK Build Pipeline"}),"\n",(0,s.jsx)(i.h3,{id:"trigger",children:"Trigger"}),"\n",(0,s.jsxs)(i.p,{children:[(0,s.jsx)(i.code,{children:"POST /wizard/builds/request"})," creates a ",(0,s.jsx)(i.code,{children:"BuildRequest"})," record and calls ",(0,s.jsx)(i.code,{children:"GitHubBuildService.triggerUatBuild()"}),", which fires a GitHub Actions ",(0,s.jsx)(i.code,{children:"repository_dispatch"})," event with a payload containing:"]}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.code,{children:"gymId"})," - target gym identifier"]}),"\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.code,{children:"buildId"})," - unique build request ID"]}),"\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.code,{children:"callbackUrl"})," - webhook URL for the build to report back to"]}),"\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.code,{children:"apiUrl"})," - API base URL for fetching gym branding"]}),"\n"]}),"\n",(0,s.jsx)(i.h3,{id:"build-workflow",children:"Build Workflow"}),"\n",(0,s.jsxs)(i.p,{children:["The ",(0,s.jsx)(i.code,{children:"uat-build.yml"})," workflow in the ",(0,s.jsx)(i.code,{children:"fitnexa-mobile"})," repo:"]}),"\n",(0,s.jsxs)(i.ol,{children:["\n",(0,s.jsx)(i.li,{children:"Sets up Node.js 20 and Java 17"}),"\n",(0,s.jsx)(i.li,{children:"Installs dependencies"}),"\n",(0,s.jsx)(i.li,{children:"Fetches gym branding from the API"}),"\n",(0,s.jsxs)(i.li,{children:["Runs ",(0,s.jsx)(i.code,{children:"expo prebuild --platform android"})]}),"\n",(0,s.jsxs)(i.li,{children:["Builds APK via Gradle (",(0,s.jsx)(i.code,{children:"assembleRelease"}),")"]}),"\n",(0,s.jsx)(i.li,{children:"Uploads artifact to GitHub Actions"}),"\n",(0,s.jsx)(i.li,{children:"Calls the callback URL with status and artifact URL"}),"\n"]}),"\n",(0,s.jsx)(i.h3,{id:"webhook",children:"Webhook"}),"\n",(0,s.jsxs)(i.p,{children:[(0,s.jsx)(i.code,{children:"POST /wizard/webhooks/build-complete"})," receives the callback and updates the ",(0,s.jsx)(i.code,{children:"BuildRequest"})," record with:"]}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.code,{children:"status"}),": SUCCESS or FAILED"]}),"\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.code,{children:"buildUrl"}),": GitHub Actions artifact download URL"]}),"\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.code,{children:"completedAt"}),": timestamp"]}),"\n"]}),"\n",(0,s.jsx)(i.p,{children:"The gym admin polling picks up the status change and shows the download button."}),"\n",(0,s.jsx)(i.hr,{}),"\n",(0,s.jsx)(i.h2,{id:"environment-variables",children:"Environment Variables"}),"\n",(0,s.jsx)(i.h3,{id:"wizard-service",children:"Wizard Service"}),"\n",(0,s.jsxs)(i.table,{children:[(0,s.jsx)(i.thead,{children:(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.th,{children:"Variable"}),(0,s.jsx)(i.th,{children:"Required"}),(0,s.jsx)(i.th,{children:"Description"})]})}),(0,s.jsxs)(i.tbody,{children:[(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:(0,s.jsx)(i.code,{children:"SMTP_HOST"})}),(0,s.jsx)(i.td,{children:"For email"}),(0,s.jsx)(i.td,{children:"SMTP server host (default: smtp.sendgrid.net)"})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:(0,s.jsx)(i.code,{children:"SMTP_PORT"})}),(0,s.jsx)(i.td,{children:"For email"}),(0,s.jsx)(i.td,{children:"SMTP port (default: 587)"})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:(0,s.jsx)(i.code,{children:"SMTP_USER"})}),(0,s.jsx)(i.td,{children:"For email"}),(0,s.jsx)(i.td,{children:"SMTP username (default: apikey)"})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:(0,s.jsx)(i.code,{children:"SMTP_PASS"})}),(0,s.jsx)(i.td,{children:"For email"}),(0,s.jsx)(i.td,{children:"SMTP password / API key. If unset, falls back to mock."})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:(0,s.jsx)(i.code,{children:"SMTP_FROM"})}),(0,s.jsx)(i.td,{children:"For email"}),(0,s.jsxs)(i.td,{children:["Sender address (default: FitNexa ",(0,s.jsx)(i.a,{href:"mailto:noreply@gymia.fit",children:"noreply@gymia.fit"}),")"]})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:(0,s.jsx)(i.code,{children:"GITHUB_TOKEN"})}),(0,s.jsx)(i.td,{children:"For builds"}),(0,s.jsx)(i.td,{children:"GitHub PAT with repo scope. If unset, falls back to mock."})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:(0,s.jsx)(i.code,{children:"GITHUB_REPO_OWNER"})}),(0,s.jsx)(i.td,{children:"No"}),(0,s.jsx)(i.td,{children:"GitHub org (default: FitNexa)"})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:(0,s.jsx)(i.code,{children:"GITHUB_REPO_NAME"})}),(0,s.jsx)(i.td,{children:"No"}),(0,s.jsx)(i.td,{children:"Repo containing uat-build.yml (default: fitnexa-mobile)"})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:(0,s.jsx)(i.code,{children:"GITHUB_CALLBACK_URL"})}),(0,s.jsx)(i.td,{children:"No"}),(0,s.jsx)(i.td,{children:"Override webhook base URL (default: uses API_URL)"})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:(0,s.jsx)(i.code,{children:"GYM_ADMIN_URL"})}),(0,s.jsx)(i.td,{children:"No"}),(0,s.jsxs)(i.td,{children:["Welcome email link (default: ",(0,s.jsx)(i.a,{href:"https://admin.uat.gymia.fit",children:"https://admin.uat.gymia.fit"}),")"]})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:(0,s.jsx)(i.code,{children:"FRONTEND_URL"})}),(0,s.jsx)(i.td,{children:"No"}),(0,s.jsxs)(i.td,{children:["Activation link base (default: ",(0,s.jsx)(i.a,{href:"https://onboarding.uat.gymia.fit",children:"https://onboarding.uat.gymia.fit"}),")"]})]})]})]}),"\n",(0,s.jsx)(i.hr,{}),"\n",(0,s.jsx)(i.h2,{id:"api-endpoints",children:"API Endpoints"}),"\n",(0,s.jsxs)(i.table,{children:[(0,s.jsx)(i.thead,{children:(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.th,{children:"Method"}),(0,s.jsx)(i.th,{children:"Path"}),(0,s.jsx)(i.th,{children:"Auth"}),(0,s.jsx)(i.th,{children:"Description"})]})}),(0,s.jsxs)(i.tbody,{children:[(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"POST"}),(0,s.jsx)(i.td,{children:(0,s.jsx)(i.code,{children:"/wizard/onboard"})}),(0,s.jsx)(i.td,{children:"None"}),(0,s.jsx)(i.td,{children:"Submit onboarding data"})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"GET"}),(0,s.jsx)(i.td,{children:(0,s.jsx)(i.code,{children:"/wizard/activate/:token"})}),(0,s.jsx)(i.td,{children:"None"}),(0,s.jsx)(i.td,{children:"Validate activation token"})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"POST"}),(0,s.jsx)(i.td,{children:(0,s.jsx)(i.code,{children:"/wizard/activate"})}),(0,s.jsx)(i.td,{children:"None"}),(0,s.jsx)(i.td,{children:"Set password and activate"})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"GET"}),(0,s.jsx)(i.td,{children:(0,s.jsx)(i.code,{children:"/wizard/sessions"})}),(0,s.jsx)(i.td,{children:"JWT"}),(0,s.jsx)(i.td,{children:"List wizard sessions"})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"GET"}),(0,s.jsx)(i.td,{children:(0,s.jsx)(i.code,{children:"/wizard/sessions/:id"})}),(0,s.jsx)(i.td,{children:"Optional"}),(0,s.jsx)(i.td,{children:"Get session by ID"})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"PUT"}),(0,s.jsx)(i.td,{children:(0,s.jsx)(i.code,{children:"/wizard/sessions/:id"})}),(0,s.jsx)(i.td,{children:"Optional"}),(0,s.jsx)(i.td,{children:"Update session data"})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"POST"}),(0,s.jsx)(i.td,{children:(0,s.jsx)(i.code,{children:"/wizard/builds/request"})}),(0,s.jsx)(i.td,{children:"JWT"}),(0,s.jsx)(i.td,{children:"Request a UAT APK build"})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"GET"}),(0,s.jsx)(i.td,{children:(0,s.jsx)(i.code,{children:"/wizard/builds/:id/status"})}),(0,s.jsx)(i.td,{children:"JWT"}),(0,s.jsx)(i.td,{children:"Get build status"})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"GET"}),(0,s.jsx)(i.td,{children:(0,s.jsx)(i.code,{children:"/wizard/builds/gym/:gymId"})}),(0,s.jsx)(i.td,{children:"JWT"}),(0,s.jsx)(i.td,{children:"List builds for a gym"})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"POST"}),(0,s.jsx)(i.td,{children:(0,s.jsx)(i.code,{children:"/wizard/builds/:id/go-live"})}),(0,s.jsx)(i.td,{children:"JWT"}),(0,s.jsx)(i.td,{children:"Create Stripe checkout"})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"POST"}),(0,s.jsx)(i.td,{children:(0,s.jsx)(i.code,{children:"/wizard/webhooks/build-complete"})}),(0,s.jsx)(i.td,{children:"None"}),(0,s.jsx)(i.td,{children:"GitHub Actions callback"})]})]})]}),"\n",(0,s.jsx)(i.hr,{}),"\n",(0,s.jsx)(i.h2,{id:"database-models",children:"Database Models"}),"\n",(0,s.jsx)(i.h3,{id:"wizardsession",children:"WizardSession"}),"\n",(0,s.jsxs)(i.table,{children:[(0,s.jsx)(i.thead,{children:(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.th,{children:"Field"}),(0,s.jsx)(i.th,{children:"Type"}),(0,s.jsx)(i.th,{children:"Description"})]})}),(0,s.jsxs)(i.tbody,{children:[(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"id"}),(0,s.jsx)(i.td,{children:"UUID"}),(0,s.jsx)(i.td,{children:"Primary key"})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"gymId"}),(0,s.jsx)(i.td,{children:"String (nullable)"}),(0,s.jsx)(i.td,{children:"Associated gym"})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"name"}),(0,s.jsx)(i.td,{children:"String"}),(0,s.jsx)(i.td,{children:"Session label"})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"step"}),(0,s.jsx)(i.td,{children:"Int"}),(0,s.jsx)(i.td,{children:"Current wizard step"})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"data"}),(0,s.jsx)(i.td,{children:"String (JSON)"}),(0,s.jsx)(i.td,{children:"Encoded GymConfig object"})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"status"}),(0,s.jsx)(i.td,{children:"Enum"}),(0,s.jsx)(i.td,{children:"IN_PROGRESS, COMPLETED, DRAFT, PENDING_APPROVAL, REJECTED"})]})]})]}),"\n",(0,s.jsx)(i.h3,{id:"activationtoken",children:"ActivationToken"}),"\n",(0,s.jsxs)(i.table,{children:[(0,s.jsx)(i.thead,{children:(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.th,{children:"Field"}),(0,s.jsx)(i.th,{children:"Type"}),(0,s.jsx)(i.th,{children:"Description"})]})}),(0,s.jsxs)(i.tbody,{children:[(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"id"}),(0,s.jsx)(i.td,{children:"UUID"}),(0,s.jsx)(i.td,{children:"Primary key"})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"userId"}),(0,s.jsx)(i.td,{children:"String"}),(0,s.jsx)(i.td,{children:"References identity-service user"})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"token"}),(0,s.jsx)(i.td,{children:"String"}),(0,s.jsx)(i.td,{children:"Unique 64-char hex"})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"expiresAt"}),(0,s.jsx)(i.td,{children:"DateTime"}),(0,s.jsx)(i.td,{children:"24 hours from creation"})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"usedAt"}),(0,s.jsx)(i.td,{children:"DateTime (nullable)"}),(0,s.jsx)(i.td,{children:"Set when activated"})]})]})]}),"\n",(0,s.jsx)(i.h3,{id:"buildrequest",children:"BuildRequest"}),"\n",(0,s.jsxs)(i.table,{children:[(0,s.jsx)(i.thead,{children:(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.th,{children:"Field"}),(0,s.jsx)(i.th,{children:"Type"}),(0,s.jsx)(i.th,{children:"Description"})]})}),(0,s.jsxs)(i.tbody,{children:[(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"id"}),(0,s.jsx)(i.td,{children:"UUID"}),(0,s.jsx)(i.td,{children:"Primary key"})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"gymId"}),(0,s.jsx)(i.td,{children:"String"}),(0,s.jsx)(i.td,{children:"Target gym"})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"platform"}),(0,s.jsx)(i.td,{children:"String"}),(0,s.jsx)(i.td,{children:"android, ios, or both"})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"environment"}),(0,s.jsx)(i.td,{children:"String"}),(0,s.jsx)(i.td,{children:"uat or production"})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"status"}),(0,s.jsx)(i.td,{children:"Enum"}),(0,s.jsx)(i.td,{children:"QUEUED, BUILDING, SUCCESS, FAILED"})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"buildUrl"}),(0,s.jsx)(i.td,{children:"String (nullable)"}),(0,s.jsx)(i.td,{children:"Artifact download URL"})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"triggeredBy"}),(0,s.jsx)(i.td,{children:"String"}),(0,s.jsx)(i.td,{children:"User ID who requested"})]})]})]}),"\n",(0,s.jsx)(i.hr,{}),"\n",(0,s.jsxs)(i.p,{children:["Related: ",(0,s.jsx)(i.a,{href:"/docs/backend/services/wizard-service",children:"Wizard Service"})," | ",(0,s.jsx)(i.a,{href:"/docs/frontend/apps/gym-admin",children:"Gym Admin"})," | ",(0,s.jsx)(i.a,{href:"/docs/frontend/apps/onboarding",children:"Onboarding App"})," | ",(0,s.jsx)(i.a,{href:"/docs/frontend/apps/landing",children:"Landing Page"})]})]})}function o(e={}){const{wrapper:i}={...(0,r.R)(),...e.components};return i?(0,s.jsx)(i,{...e,children:(0,s.jsx)(h,{...e})}):h(e)}},8453(e,i,n){n.d(i,{R:()=>t,x:()=>l});var d=n(6540);const s={},r=d.createContext(s);function t(e){const i=d.useContext(r);return d.useMemo(function(){return"function"==typeof e?e(i):{...i,...e}},[i,e])}function l(e){let i;return i=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:t(e.components),d.createElement(r.Provider,{value:i},e.children)}}}]);