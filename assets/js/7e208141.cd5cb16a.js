"use strict";(globalThis.webpackChunkfitnexa_docs=globalThis.webpackChunkfitnexa_docs||[]).push([[9685],{2534(e,n,r){r.r(n),r.d(n,{assets:()=>a,contentTitle:()=>c,default:()=>h,frontMatter:()=>t,metadata:()=>s,toc:()=>l});const s=JSON.parse('{"id":"SHARED_PACKAGE","title":"@fitnexa/shared Package","description":"The @fitnexa/shared package is the shared kernel for the FitNexa platform. It provides types, configuration, API clients, server bootstrap, and middleware used by fitnexa-mobile, fitnexa-backend services, and admin apps. It has no dependency on mobile or backend; both depend on it.","source":"@site/docs/SHARED_PACKAGE.md","sourceDirName":".","slug":"/SHARED_PACKAGE","permalink":"/docs/SHARED_PACKAGE","draft":false,"unlisted":false,"editUrl":"https://github.com/FitNexa/fitnexa-platform/tree/main/fitnexa-docs/docs/SHARED_PACKAGE.md","tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"FitNexa Architecture Review","permalink":"/docs/ARCHITECTURE_REVIEW"},"next":{"title":"FitNexa System Overview","permalink":"/docs/SYSTEM_OVERVIEW"}}');var d=r(4848),i=r(8453);const t={},c="@fitnexa/shared Package",a={},l=[{value:"\ud83d\udce6 Subpath Exports",id:"-subpath-exports",level:2},{value:"\ud83d\udda5\ufe0f Backend usage",id:"\ufe0f-backend-usage",level:2},{value:"\ud83d\udcf1 Mobile usage",id:"-mobile-usage",level:2},{value:"\ud83d\udd00 Dependency direction",id:"-dependency-direction",level:2}];function o(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",header:"header",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...e.components};return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(n.header,{children:(0,d.jsx)(n.h1,{id:"fitnexashared-package",children:"@fitnexa/shared Package"})}),"\n",(0,d.jsxs)(n.p,{children:["The ",(0,d.jsx)(n.strong,{children:"@fitnexa/shared"})," package is the shared kernel for the FitNexa platform. It provides types, configuration, API clients, server bootstrap, and middleware used by ",(0,d.jsx)(n.strong,{children:"fitnexa-mobile"}),", ",(0,d.jsx)(n.strong,{children:"fitnexa-backend"})," services, and admin apps. It has ",(0,d.jsx)(n.strong,{children:"no dependency"})," on mobile or backend; both depend on it."]}),"\n",(0,d.jsx)(n.h2,{id:"-subpath-exports",children:"\ud83d\udce6 Subpath Exports"}),"\n",(0,d.jsxs)(n.p,{children:["Consumers should use ",(0,d.jsx)(n.strong,{children:"subpath imports"})," so that only the needed code is pulled in (and to avoid pulling Node-only code into the mobile bundle)."]}),"\n",(0,d.jsxs)(n.table,{children:[(0,d.jsx)(n.thead,{children:(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.th,{children:"Export"}),(0,d.jsx)(n.th,{children:"Use case"}),(0,d.jsx)(n.th,{children:"Contents"})]})}),(0,d.jsxs)(n.tbody,{children:[(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"@fitnexa/shared/types"})}),(0,d.jsx)(n.td,{children:"All apps"}),(0,d.jsx)(n.td,{children:"DTOs, interfaces (User, Gym, CheckIn, etc.)."})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"@fitnexa/shared/config"})}),(0,d.jsx)(n.td,{children:"Mobile, Admin"}),(0,d.jsxs)(n.td,{children:[(0,d.jsx)(n.strong,{children:"Environment only"}),": ",(0,d.jsx)(n.code,{children:"getEnvironment()"}),", ",(0,d.jsx)(n.code,{children:"getApiUrls()"}),", in-memory config. Safe for browser/React Native."]})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"@fitnexa/shared/api"})}),(0,d.jsx)(n.td,{children:"Mobile, Admin"}),(0,d.jsxs)(n.td,{children:["Platform-agnostic ",(0,d.jsx)(n.code,{children:"ApiClient"})," and helpers."]})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"@fitnexa/shared/lib/utils"})}),(0,d.jsx)(n.td,{children:"All"}),(0,d.jsxs)(n.td,{children:["Shared utilities (e.g. ",(0,d.jsx)(n.code,{children:"clsx"}),", ",(0,d.jsx)(n.code,{children:"tailwind-merge"}),")."]})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"@fitnexa/shared/logger"})}),(0,d.jsx)(n.td,{children:"All"}),(0,d.jsx)(n.td,{children:"Environment-aware logger (console in browser, Winston in Node)."})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"@fitnexa/shared/errors"})}),(0,d.jsx)(n.td,{children:"Backend, Mobile"}),(0,d.jsxs)(n.td,{children:[(0,d.jsx)(n.code,{children:"AppError"})," and error types."]})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.strong,{children:(0,d.jsx)(n.code,{children:"@fitnexa/shared/server"})})}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.strong,{children:"Backend only"})}),(0,d.jsxs)(n.td,{children:[(0,d.jsx)(n.strong,{children:"Node-only"}),": ",(0,d.jsx)(n.code,{children:"ConfigManager"}),", ",(0,d.jsx)(n.code,{children:"createBaseService"}),", bootstrap, Express middleware (auth, correlation, error handler). Do ",(0,d.jsx)(n.strong,{children:"not"})," use in mobile or browser."]})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"@fitnexa/shared/middleware"})}),(0,d.jsx)(n.td,{children:"Backend"}),(0,d.jsx)(n.td,{children:"Express middleware (error handling, correlation, performance)."})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"@fitnexa/shared/services"})}),(0,d.jsx)(n.td,{children:"Optional"}),(0,d.jsx)(n.td,{children:"Shared service interfaces and implementations (e.g. authService)."})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"@fitnexa/shared/swagger"})}),(0,d.jsx)(n.td,{children:"Backend"}),(0,d.jsx)(n.td,{children:"Swagger/OpenAPI utilities."})]})]})]}),"\n",(0,d.jsx)(n.h2,{id:"\ufe0f-backend-usage",children:"\ud83d\udda5\ufe0f Backend usage"}),"\n",(0,d.jsx)(n.p,{children:"All backend services (Gateway, Identity, Gym, Content, Nutrition, Squad, Wizard, Messaging, Logging) use:"}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.strong,{children:(0,d.jsx)(n.code,{children:"@fitnexa/shared/server"})})," for ",(0,d.jsx)(n.code,{children:"ConfigManager"}),", ",(0,d.jsx)(n.code,{children:"createBaseService"}),", and server bootstrap."]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.strong,{children:(0,d.jsx)(n.code,{children:"@fitnexa/shared/types"})})," for DTOs and request/response types."]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.strong,{children:(0,d.jsx)(n.code,{children:"@fitnexa/shared/middleware"})})," and ",(0,d.jsx)(n.strong,{children:(0,d.jsx)(n.code,{children:"@fitnexa/shared/errors"})})," for consistent API behavior."]}),"\n"]}),"\n",(0,d.jsxs)(n.p,{children:["Each service\u2019s ",(0,d.jsx)(n.code,{children:"tsconfig.json"})," uses a ",(0,d.jsx)(n.strong,{children:"path mapping"})," so that ",(0,d.jsx)(n.code,{children:"@fitnexa/shared/server"})," resolves to the built shared package, e.g.:"]}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-json",children:'"paths": {\n  "@fitnexa/shared/server": ["../../../fitnexa-shared/dist/server/index.js"]\n}\n'})}),"\n",(0,d.jsxs)(n.p,{children:[(0,d.jsx)(n.strong,{children:"Important:"})," Build the shared package (",(0,d.jsx)(n.code,{children:"npm run build"})," in ",(0,d.jsx)(n.code,{children:"fitnexa-shared"}),") before building or running any backend service."]}),"\n",(0,d.jsx)(n.h2,{id:"-mobile-usage",children:"\ud83d\udcf1 Mobile usage"}),"\n",(0,d.jsxs)(n.p,{children:["The mobile app uses ",(0,d.jsx)(n.strong,{children:"only"}),":"]}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsx)(n.li,{children:(0,d.jsx)(n.code,{children:"@fitnexa/shared/types"})}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.code,{children:"@fitnexa/shared/config"})," (environment only; does ",(0,d.jsx)(n.strong,{children:"not"})," import ",(0,d.jsx)(n.code,{children:"config-manager"}),")"]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.code,{children:"@fitnexa/shared/api"})," (for base client; the app uses its own ",(0,d.jsx)(n.code,{children:"api.ts"})," with auth and refresh)"]}),"\n",(0,d.jsx)(n.li,{children:(0,d.jsx)(n.code,{children:"@fitnexa/shared/lib/utils"})}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.code,{children:"@fitnexa/shared/errors"})," (if needed)"]}),"\n"]}),"\n",(0,d.jsxs)(n.p,{children:["It must ",(0,d.jsx)(n.strong,{children:"not"})," import ",(0,d.jsx)(n.code,{children:"@fitnexa/shared/server"})," or the default barrel ",(0,d.jsx)(n.code,{children:"@fitnexa/shared"})," in a way that pulls in Node/Express."]}),"\n",(0,d.jsx)(n.h2,{id:"-dependency-direction",children:"\ud83d\udd00 Dependency direction"}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.strong,{children:"fitnexa-shared"})," \u2192 no dependency on mobile or backend."]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.strong,{children:"fitnexa-mobile"})," \u2192 depends on shared (types, config, api, lib/utils)."]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.strong,{children:"fitnexa-backend"})," \u2192 depends on shared (server, types, middleware, errors)."]}),"\n"]}),"\n",(0,d.jsxs)(n.p,{children:["See ",(0,d.jsx)(n.a,{href:"/docs/ARCHITECTURE_REVIEW",children:"Architecture Review"})," for more detail."]}),"\n",(0,d.jsx)(n.hr,{}),"\n",(0,d.jsxs)(n.p,{children:[(0,d.jsx)(n.a,{href:"/docs/backend/ARCHITECTURE",children:"Backend Architecture"})," \xb7 ",(0,d.jsx)(n.a,{href:"/docs/ARCHITECTURE_REVIEW",children:"Architecture Review"})," \xb7 ",(0,d.jsx)(n.a,{href:"/docs/SYSTEM_OVERVIEW",children:"System Overview"})]})]})}function h(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,d.jsx)(n,{...e,children:(0,d.jsx)(o,{...e})}):o(e)}},8453(e,n,r){r.d(n,{R:()=>t,x:()=>c});var s=r(6540);const d={},i=s.createContext(d);function t(e){const n=s.useContext(i);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(d):e.components||d:t(e.components),s.createElement(i.Provider,{value:n},e.children)}}}]);