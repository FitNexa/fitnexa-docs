"use strict";(globalThis.webpackChunkfitnexa_docs=globalThis.webpackChunkfitnexa_docs||[]).push([[8715],{705(e,n,i){i.r(n),i.d(n,{assets:()=>c,contentTitle:()=>a,default:()=>h,frontMatter:()=>o,metadata:()=>t,toc:()=>l});const t=JSON.parse('{"id":"infrastructure/single-domain-vercel","title":"Single Domain Vercel","description":"How to configure a single custom domain for the entire platform suite","source":"@site/docs/infrastructure/single-domain-vercel.md","sourceDirName":"infrastructure","slug":"/infrastructure/single-domain-vercel","permalink":"/docs/infrastructure/single-domain-vercel","draft":false,"unlisted":false,"editUrl":"https://github.com/FitNexa/fitnexa-platform/tree/main/fitnexa-docs/docs/infrastructure/single-domain-vercel.md","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"sidebar_position":2,"title":"Single Domain Vercel","description":"How to configure a single custom domain for the entire platform suite"},"sidebar":"tutorialSidebar","previous":{"title":"Logging & Observability","permalink":"/docs/infrastructure/logging-observability"},"next":{"title":"UAT Setup","permalink":"/docs/infrastructure/uat-setup"}}');var r=i(4848),s=i(8453);const o={sidebar_position:2,title:"Single Domain Vercel",description:"How to configure a single custom domain for the entire platform suite"},a="Single Domain Deployment",c={},l=[{value:"\ud83c\udfd7\ufe0f Architecture",id:"\ufe0f-architecture",level:2},{value:"\ud83d\ude80 Step-by-Step Configuration",id:"-step-by-step-configuration",level:2},{value:"Phase 1: API (Backend)",id:"phase-1-api-backend",level:3},{value:"Phase 2: DNS (Vercel)",id:"phase-2-dns-vercel",level:3},{value:"Phase 3: Gym Admin (Tenant Resolution)",id:"phase-3-gym-admin-tenant-resolution",level:3}];function d(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"single-domain-deployment",children:"Single Domain Deployment"})}),"\n",(0,r.jsxs)(n.p,{children:["This document describes how to use ",(0,r.jsx)(n.strong,{children:"one main domain"})," for the full FitNexa flow: landing page, onboarding, ",(0,r.jsx)(n.strong,{children:"per-gym admin on a subdomain"}),", and mobile app builds."]}),"\n",(0,r.jsx)(n.h2,{id:"\ufe0f-architecture",children:"\ud83c\udfd7\ufe0f Architecture"}),"\n",(0,r.jsxs)(n.p,{children:["We use ",(0,r.jsx)(n.strong,{children:"Option B"}),": The backend is served at ",(0,r.jsx)(n.code,{children:"api.uat.gymia.fit"}),", while the root ",(0,r.jsx)(n.code,{children:"uat.gymia.fit"})," is managed by Vercel for the frontends."]}),"\n",(0,r.jsx)(n.h2,{id:"-step-by-step-configuration",children:"\ud83d\ude80 Step-by-Step Configuration"}),"\n",(0,r.jsx)(n.h3,{id:"phase-1-api-backend",children:"Phase 1: API (Backend)"}),"\n",(0,r.jsxs)(n.p,{children:["The backend uses ",(0,r.jsx)(n.strong,{children:"Caddy"})," to serve only ",(0,r.jsx)(n.code,{children:"api.uat.gymia.fit"}),"."]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Scripts"}),": ",(0,r.jsx)(n.code,{children:"build-mobile-uat"}),", ",(0,r.jsx)(n.code,{children:"easy-setup"}),", and ",(0,r.jsx)(n.code,{children:"easy-test"})," are configured for this URL."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Action"}),": Add an ",(0,r.jsx)(n.strong,{children:"A"})," record for ",(0,r.jsx)(n.code,{children:"api.uat.gymia.fit"})," pointing to your backend IP."]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"phase-2-dns-vercel",children:"Phase 2: DNS (Vercel)"}),"\n",(0,r.jsx)(n.p,{children:"We recommend managing DNS in Vercel for simplicity."}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Root Domain"}),": ",(0,r.jsx)(n.code,{children:"uat.gymia.fit"})," -> Landing Project."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Super Admin"}),": ",(0,r.jsx)(n.code,{children:"admin.uat.gymia.fit"})," -> Super Admin Project."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Gym Admin (Wildcard)"}),": ",(0,r.jsx)(n.code,{children:"*.uat.gymia.fit"})," -> Gym Admin Project."]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"phase-3-gym-admin-tenant-resolution",children:"Phase 3: Gym Admin (Tenant Resolution)"}),"\n",(0,r.jsx)(n.p,{children:"The Gym Admin app resolves the tenant from the hostname:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"const hostname = window.location.hostname;\nconst baseDomain = 'uat.gymia.fit';\nconst gymSlug = hostname.endsWith(`.${baseDomain}`)\n  ? hostname.slice(0, -(`.${baseDomain}`.length))\n  : null;\n"})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsxs)(n.p,{children:["Related: ",(0,r.jsx)(n.a,{href:"/docs/infrastructure/uat-setup",children:"UAT Setup"})," \xb7 ",(0,r.jsx)(n.a,{href:"/docs/overview/system-overview",children:"System Overview"})]})]})}function h(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}},8453(e,n,i){i.d(n,{R:()=>o,x:()=>a});var t=i(6540);const r={},s=t.createContext(r);function o(e){const n=t.useContext(s);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:o(e.components),t.createElement(s.Provider,{value:n},e.children)}}}]);