"use strict";(globalThis.webpackChunkfitnexa_docs=globalThis.webpackChunkfitnexa_docs||[]).push([[373],{2631(e,n,i){i.r(n),i.d(n,{assets:()=>a,contentTitle:()=>t,default:()=>h,frontMatter:()=>o,metadata:()=>d,toc:()=>l});const d=JSON.parse('{"id":"infrastructure/SINGLE_DOMAIN_VERCEL","title":"Single Domain: Landing \u2192 Onboarding \u2192 Gym Admin (subdomain) \u2192 Mobile App","description":"This doc describes how to use one main domain for the full flow: landing page, onboarding, per-gym admin on a subdomain, and mobile app creation from the gym admin.","source":"@site/docs/infrastructure/SINGLE_DOMAIN_VERCEL.md","sourceDirName":"infrastructure","slug":"/infrastructure/SINGLE_DOMAIN_VERCEL","permalink":"/fitnexa-docs/docs/infrastructure/SINGLE_DOMAIN_VERCEL","draft":false,"unlisted":false,"editUrl":"https://github.com/FitNexa/fitnexa-platform/tree/main/fitnexa-docs/docs/infrastructure/SINGLE_DOMAIN_VERCEL.md","tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Logging & Observability","permalink":"/fitnexa-docs/docs/infrastructure/LOGGING_&_OBSERVABILITY"},"next":{"title":"Mobile Error Handling & Correlation","permalink":"/fitnexa-docs/docs/mobile/ERROR_HANDLING"}}');var r=i(4848),s=i(8453);const o={},t="Single Domain: Landing \u2192 Onboarding \u2192 Gym Admin (subdomain) \u2192 Mobile App",a={},l=[{value:"Step-by-step: everything you have to do",id:"step-by-step-everything-you-have-to-do",level:2},{value:"Phase 1: API (backend) \u2013 Option B done",id:"phase-1-api-backend--option-b-done",level:3},{value:"Phase 2: DNS (where you manage uat.gymia.fit)",id:"phase-2-dns-where-you-manage-uatgymiafit",level:3},{value:"Phase 3: Vercel \u2013 add domains to each project",id:"phase-3-vercel--add-domains-to-each-project",level:3},{value:"Phase 4: App configuration",id:"phase-4-app-configuration",level:3},{value:"Phase 5: Verify",id:"phase-5-verify",level:3},{value:"1. Product flow (what we\u2019re supporting)",id:"1-product-flow-what-were-supporting",level:2},{value:"2. Recommended domain layout (one domain)",id:"2-recommended-domain-layout-one-domain",level:2},{value:"3. DNS and Vercel setup",id:"3-dns-and-vercel-setup",level:2},{value:"3.1 Main domain and fixed subdomains",id:"31-main-domain-and-fixed-subdomains",level:3},{value:"3.2 Wildcard subdomain for Gym Admin",id:"32-wildcard-subdomain-for-gym-admin",level:3},{value:"4. Optional: onboarding on a subdomain",id:"4-optional-onboarding-on-a-subdomain",level:2},{value:"5. Path-based alternative (no wildcard)",id:"5-path-based-alternative-no-wildcard",level:2},{value:"6. Mobile app creation from gym admin",id:"6-mobile-app-creation-from-gym-admin",level:2},{value:"7. Summary",id:"7-summary",level:2}];function c(e){const n={code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,s.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"single-domain-landing--onboarding--gym-admin-subdomain--mobile-app",children:"Single Domain: Landing \u2192 Onboarding \u2192 Gym Admin (subdomain) \u2192 Mobile App"})}),"\n",(0,r.jsxs)(n.p,{children:["This doc describes how to use ",(0,r.jsx)(n.strong,{children:"one main domain"})," for the full flow: landing page, onboarding, ",(0,r.jsx)(n.strong,{children:"per-gym admin on a subdomain"}),", and mobile app creation from the gym admin."]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Option B is implemented:"})," The backend is served only at ",(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"https://api.uat.gymia.fit"})}),". The root ",(0,r.jsx)(n.code,{children:"uat.gymia.fit"})," is for Vercel (Landing). Scripts, mobile build, and backend Caddy already use ",(0,r.jsx)(n.code,{children:"api.uat.gymia.fit"}),"; you only need to complete ",(0,r.jsx)(n.strong,{children:"DNS"})," and ",(0,r.jsx)(n.strong,{children:"Vercel"})," steps below."]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"step-by-step-everything-you-have-to-do",children:"Step-by-step: everything you have to do"}),"\n",(0,r.jsxs)(n.p,{children:["Do these in order. You need: access to DNS for ",(0,r.jsx)(n.code,{children:"uat.gymia.fit"}),", Vercel dashboard, and the repos for Landing, Gym Admin, and Super Admin."]}),"\n",(0,r.jsx)(n.h3,{id:"phase-1-api-backend--option-b-done",children:"Phase 1: API (backend) \u2013 Option B done"}),"\n",(0,r.jsxs)(n.p,{children:["The backend has been moved to ",(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"api.uat.gymia.fit"})}),":"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Caddy"})," (fitnexa-backend): serves only ",(0,r.jsx)(n.code,{children:"api.uat.gymia.fit"}),"; root landing HTML is no longer on the backend."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Scripts and mobile:"})," ",(0,r.jsx)(n.code,{children:"build-mobile-uat"}),", ",(0,r.jsx)(n.code,{children:"easy-setup"}),", ",(0,r.jsx)(n.code,{children:"easy-test"})," use ",(0,r.jsx)(n.code,{children:"https://api.uat.gymia.fit"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Backend docs:"})," All UAT API URLs in docs point to ",(0,r.jsx)(n.code,{children:"https://api.uat.gymia.fit"}),"."]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["You still need to: ",(0,r.jsx)(n.strong,{children:"(1)"})," Add DNS for ",(0,r.jsx)(n.code,{children:"api.uat.gymia.fit"})," \u2192 your server IP, and ",(0,r.jsx)(n.strong,{children:"(2)"})," Deploy the backend (so Caddy uses the updated Caddyfile). Then point ",(0,r.jsx)(n.code,{children:"uat.gymia.fit"})," and ",(0,r.jsx)(n.code,{children:"www.uat.gymia.fit"})," to Vercel for the Landing."]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h3,{id:"phase-2-dns-where-you-manage-uatgymiafit",children:"Phase 2: DNS (where you manage uat.gymia.fit)"}),"\n",(0,r.jsx)(n.p,{children:"Do this in your DNS provider (e.g. Cloudflare, Namecheap, Route53, etc.)."}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Root domain (only if using Option B above)"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Add the ",(0,r.jsx)(n.strong,{children:"A"})," and/or ",(0,r.jsx)(n.strong,{children:"CNAME"})," records that Vercel will show when you add ",(0,r.jsx)(n.code,{children:"uat.gymia.fit"})," to the Landing project (Vercel Dashboard \u2192 Landing project \u2192 Settings \u2192 Domains \u2192 Add)."]}),"\n",(0,r.jsxs)(n.li,{children:["Often: A record ",(0,r.jsx)(n.code,{children:"uat.gymia.fit"})," \u2192 ",(0,r.jsx)(n.code,{children:"76.76.21.21"})," (or the IP Vercel gives)."]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"www (optional)"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Add CNAME: ",(0,r.jsx)(n.strong,{children:"Name"})," ",(0,r.jsx)(n.code,{children:"www"}),", ",(0,r.jsx)(n.strong,{children:"Target"})," ",(0,r.jsx)(n.code,{children:"cname.vercel-dns.com"})," (or the value Vercel shows for ",(0,r.jsx)(n.code,{children:"www.uat.gymia.fit"}),")."]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Super Admin"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Add CNAME: ",(0,r.jsx)(n.strong,{children:"Name"})," ",(0,r.jsx)(n.code,{children:"admin"}),", ",(0,r.jsx)(n.strong,{children:"Target"})," ",(0,r.jsx)(n.code,{children:"cname.vercel-dns.com"})," (or Vercel\u2019s target)."]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Gym Admin (wildcard)"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Add CNAME: ",(0,r.jsx)(n.strong,{children:"Name"})," ",(0,r.jsx)(n.code,{children:"*"})," (wildcard; some providers use ",(0,r.jsx)(n.code,{children:"*.uat.gymia.fit"}),"), ",(0,r.jsx)(n.strong,{children:"Target"})," ",(0,r.jsx)(n.code,{children:"cname.vercel-dns.com"}),"."]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Optional \u2013 onboarding subdomain"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["If you want ",(0,r.jsx)(n.code,{children:"onboard.uat.gymia.fit"}),": CNAME ",(0,r.jsx)(n.strong,{children:"Name"})," ",(0,r.jsx)(n.code,{children:"onboard"}),", ",(0,r.jsx)(n.strong,{children:"Target"})," ",(0,r.jsx)(n.code,{children:"cname.vercel-dns.com"}),"."]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsxs)(n.strong,{children:["API (required for Option B) \u2013 so ",(0,r.jsx)(n.code,{children:"api.uat.gymia.fit"})," reaches your backend"]})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsxs)(n.strong,{children:["If your DNS zone is ",(0,r.jsx)(n.code,{children:"uat.gymia.fit"})]})," (you manage records ",(0,r.jsx)(n.em,{children:"under"})," uat.gymia.fit):","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Add ",(0,r.jsx)(n.strong,{children:"A"})," record: ",(0,r.jsx)(n.strong,{children:"Name"})," ",(0,r.jsx)(n.code,{children:"api"}),", ",(0,r.jsx)(n.strong,{children:"Target"})," your backend server IP (e.g. ",(0,r.jsx)(n.code,{children:"89.167.47.120"}),")."]}),"\n",(0,r.jsxs)(n.li,{children:["Or ",(0,r.jsx)(n.strong,{children:"CNAME"})," ",(0,r.jsx)(n.strong,{children:"Name"})," ",(0,r.jsx)(n.code,{children:"api"}),", ",(0,r.jsx)(n.strong,{children:"Target"})," the hostname that resolves to that server."]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsxs)(n.strong,{children:["If your DNS zone is ",(0,r.jsx)(n.code,{children:"gymia.fit"})]})," (you manage the parent domain and ",(0,r.jsx)(n.code,{children:"uat"})," is already a record):","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Add ",(0,r.jsx)(n.strong,{children:"A"})," record: ",(0,r.jsx)(n.strong,{children:"Name"})," ",(0,r.jsx)(n.code,{children:"api.uat"}),", ",(0,r.jsx)(n.strong,{children:"Target"})," your backend server IP."]}),"\n",(0,r.jsxs)(n.li,{children:["Or ",(0,r.jsx)(n.strong,{children:"CNAME"})," ",(0,r.jsx)(n.strong,{children:"Name"})," ",(0,r.jsx)(n.code,{children:"api.uat"}),", ",(0,r.jsx)(n.strong,{children:"Target"})," the hostname that resolves to that server."]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["In both cases the result is: ",(0,r.jsx)(n.strong,{children:"api.uat.gymia.fit"})," \u2192 your backend (Caddy + gateway)."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"Save DNS and wait a few minutes for propagation (can take up to 48h in rare cases)."}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h3,{id:"phase-3-vercel--add-domains-to-each-project",children:"Phase 3: Vercel \u2013 add domains to each project"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Landing project"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Vercel \u2192 your ",(0,r.jsx)(n.strong,{children:"Landing"})," project \u2192 ",(0,r.jsx)(n.strong,{children:"Settings"})," \u2192 ",(0,r.jsx)(n.strong,{children:"Domains"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:["Add: ",(0,r.jsx)(n.code,{children:"uat.gymia.fit"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:["If you use www: add ",(0,r.jsx)(n.code,{children:"www.uat.gymia.fit"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:["Set the primary domain (e.g. ",(0,r.jsx)(n.code,{children:"uat.gymia.fit"}),")."]}),"\n",(0,r.jsx)(n.li,{children:"Vercel will show \u201cInvalid configuration\u201d until DNS is correct; after DNS propagates it will turn valid."}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Super Admin project"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Settings"})," \u2192 ",(0,r.jsx)(n.strong,{children:"Domains"})," \u2192 Add: ",(0,r.jsx)(n.code,{children:"admin.uat.gymia.fit"}),"."]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Gym Admin project"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Settings"})," \u2192 ",(0,r.jsx)(n.strong,{children:"Domains"})," \u2192 Add: ",(0,r.jsx)(n.code,{children:"*.uat.gymia.fit"})," (wildcard)."]}),"\n",(0,r.jsxs)(n.li,{children:["Leave ",(0,r.jsx)(n.code,{children:"uat.gymia.fit"})," and ",(0,r.jsx)(n.code,{children:"www.uat.gymia.fit"})," only on the Landing project."]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Onboarding (if separate project)"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["If you have a separate Onboarding project: add ",(0,r.jsx)(n.code,{children:"onboard.uat.gymia.fit"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:["If onboarding is a route inside the Landing app (e.g. ",(0,r.jsx)(n.code,{children:"/onboarding"}),"), you don\u2019t need a separate domain."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h3,{id:"phase-4-app-configuration",children:"Phase 4: App configuration"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Landing (and onboarding if same app)"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Ensure the app is deployed and uses ",(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"https://api.uat.gymia.fit"})})," for any API calls."]}),"\n",(0,r.jsxs)(n.li,{children:["If onboarding is the same app, add a route like ",(0,r.jsx)(n.code,{children:"/onboarding"})," and link to it from the landing page."]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Super Admin"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Set env (e.g. ",(0,r.jsx)(n.code,{children:"VITE_API_URL"}),") to ",(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"https://api.uat.gymia.fit"})}),"."]}),"\n",(0,r.jsx)(n.li,{children:"Redeploy so the build uses that env."}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Gym Admin (subdomain \u2192 gym slug)"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"In the Gym Admin app, add logic to derive the gym from the hostname (see code block in section 3.2 below)."}),"\n",(0,r.jsxs)(n.li,{children:["Use a constant or env for the base domain, e.g. ",(0,r.jsx)(n.code,{children:"VITE_APP_DOMAIN=uat.gymia.fit"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:["On load: if ",(0,r.jsx)(n.code,{children:"gymSlug"})," is null (e.g. user opened the default ",(0,r.jsx)(n.code,{children:"xxx.vercel.app"})," URL), redirect to ",(0,r.jsx)(n.code,{children:"https://uat.gymia.fit"})," or show \u201cSelect your gym\u201d."]}),"\n",(0,r.jsxs)(n.li,{children:["Use ",(0,r.jsx)(n.code,{children:"gymSlug"})," for all API calls that need the current gym and for \u201cCreate mobile app\u201d (e.g. ",(0,r.jsx)(n.code,{children:"build:mobile:uat <gymSlug>"}),")."]}),"\n",(0,r.jsxs)(n.li,{children:["Deploy the updated Gym Admin so it\u2019s live on ",(0,r.jsx)(n.code,{children:"*.uat.gymia.fit"}),"."]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Backend / mobile app (if you moved API)"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["If you switched to ",(0,r.jsx)(n.code,{children:"api.uat.gymia.fit"}),": update backend config and mobile app ",(0,r.jsx)(n.code,{children:"API_URL"})," (or equivalent) to ",(0,r.jsx)(n.code,{children:"https://api.uat.gymia.fit"})," and redeploy/rebuild."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h3,{id:"phase-5-verify",children:"Phase 5: Verify"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["Open ",(0,r.jsx)(n.code,{children:"https://uat.gymia.fit"})," \u2192 should show Landing (or API/landing page if you kept API on root)."]}),"\n",(0,r.jsxs)(n.li,{children:["Open ",(0,r.jsx)(n.code,{children:"https://admin.uat.gymia.fit"})," \u2192 Super Admin."]}),"\n",(0,r.jsxs)(n.li,{children:["Open ",(0,r.jsx)(n.code,{children:"https://irontemple.uat.gymia.fit"})," (or a real gym slug) \u2192 Gym Admin for that gym."]}),"\n",(0,r.jsx)(n.li,{children:"From a gym subdomain, test \u201cCreate mobile app\u201d (or equivalent) and confirm it uses the correct gym and API URL."}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"1-product-flow-what-were-supporting",children:"1. Product flow (what we\u2019re supporting)"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Step"}),(0,r.jsx)(n.th,{children:"Where it lives"}),(0,r.jsx)(n.th,{children:"URL pattern"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"1. Landing"}),(0,r.jsx)(n.td,{children:"Main marketing / entry"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"https://uat.gymia.fit"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"2. Onboarding"}),(0,r.jsx)(n.td,{children:"Sign up, create gym, etc."}),(0,r.jsxs)(n.td,{children:[(0,r.jsx)(n.code,{children:"https://uat.gymia.fit/onboarding"})," (or ",(0,r.jsx)(n.code,{children:"onboard.uat.gymia.fit"}),")"]})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"3. Gym admin"}),(0,r.jsxs)(n.td,{children:["One admin per gym, ",(0,r.jsx)(n.strong,{children:"each on its own subdomain"})]}),(0,r.jsxs)(n.td,{children:[(0,r.jsx)(n.code,{children:"https://{gym-slug}.uat.gymia.fit"})," (e.g. ",(0,r.jsx)(n.code,{children:"irontemple.uat.gymia.fit"}),", ",(0,r.jsx)(n.code,{children:"greentheory.uat.gymia.fit"}),")"]})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"4. Super Admin"}),(0,r.jsx)(n.td,{children:"Platform-level (optional)"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"https://admin.uat.gymia.fit"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"5. Mobile app"}),(0,r.jsx)(n.td,{children:"Created/configured from gym admin; APK built per gym"}),(0,r.jsxs)(n.td,{children:["Triggered from gym admin; app uses same API (e.g. ",(0,r.jsx)(n.code,{children:"uat.gymia.fit"}),")"]})]})]})]}),"\n",(0,r.jsxs)(n.p,{children:["So: ",(0,r.jsx)(n.strong,{children:"one domain"}),", with ",(0,r.jsx)(n.strong,{children:"wildcard subdomains"})," for gym-specific admins. From a gym\u2019s subdomain, the owner can create/configure the branded mobile app (which you already build per gym via ",(0,r.jsx)(n.code,{children:"build:mobile:uat <gym-id>"}),")."]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"2-recommended-domain-layout-one-domain",children:"2. Recommended domain layout (one domain)"}),"\n",(0,r.jsxs)(n.p,{children:["Use ",(0,r.jsx)(n.strong,{children:"one main domain"})," (e.g. ",(0,r.jsx)(n.code,{children:"uat.gymia.fit"}),") and assign:"]}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"URL"}),(0,r.jsx)(n.th,{children:"App"}),(0,r.jsx)(n.th,{children:"Vercel project / note"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsxs)(n.td,{children:[(0,r.jsx)(n.code,{children:"uat.gymia.fit"}),", ",(0,r.jsx)(n.code,{children:"www.uat.gymia.fit"})]}),(0,r.jsx)(n.td,{children:"Landing"}),(0,r.jsx)(n.td,{children:"Landing project"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"uat.gymia.fit/onboarding"})}),(0,r.jsx)(n.td,{children:"Onboarding"}),(0,r.jsx)(n.td,{children:"Same as Landing, or separate Onboarding project with path rewrite"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsxs)(n.td,{children:[(0,r.jsx)(n.code,{children:"*.uat.gymia.fit"})," (wildcard)"]}),(0,r.jsxs)(n.td,{children:[(0,r.jsx)(n.strong,{children:"Gym Admin"})," (one app, many tenants by subdomain)"]}),(0,r.jsxs)(n.td,{children:[(0,r.jsx)(n.strong,{children:"Single"})," Gym Admin project with wildcard domain"]})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"admin.uat.gymia.fit"})}),(0,r.jsx)(n.td,{children:"Super Admin"}),(0,r.jsx)(n.td,{children:"Super Admin project"})]})]})]}),"\n",(0,r.jsxs)(n.p,{children:["Important: ",(0,r.jsx)(n.strong,{children:"Gym Admin is one Vercel project"})," that serves ",(0,r.jsx)(n.strong,{children:"all"})," gym subdomains. The app reads the hostname (e.g. ",(0,r.jsx)(n.code,{children:"irontemple.uat.gymia.fit"}),"), derives the gym slug, and loads that gym\u2019s data (and optionally triggers mobile app creation for that gym)."]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"3-dns-and-vercel-setup",children:"3. DNS and Vercel setup"}),"\n",(0,r.jsx)(n.h3,{id:"31-main-domain-and-fixed-subdomains",children:"3.1 Main domain and fixed subdomains"}),"\n",(0,r.jsxs)(n.p,{children:["In your DNS provider (where you manage ",(0,r.jsx)(n.code,{children:"uat.gymia.fit"}),"):"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Root / www:"})," Add the records Vercel shows when you add ",(0,r.jsx)(n.code,{children:"uat.gymia.fit"})," and ",(0,r.jsx)(n.code,{children:"www.uat.gymia.fit"})," to the ",(0,r.jsx)(n.strong,{children:"Landing"})," project (often A for root, CNAME for www)."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Super Admin:"})," Add a CNAME for ",(0,r.jsx)(n.code,{children:"admin"})," \u2192 ",(0,r.jsx)(n.code,{children:"cname.vercel-dns.com"})," (or the target Vercel gives). In Vercel, add ",(0,r.jsx)(n.code,{children:"admin.uat.gymia.fit"})," to the ",(0,r.jsx)(n.strong,{children:"Super Admin"})," project."]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"32-wildcard-subdomain-for-gym-admin",children:"3.2 Wildcard subdomain for Gym Admin"}),"\n",(0,r.jsxs)(n.p,{children:["To support ",(0,r.jsx)(n.code,{children:"{gym-slug}.uat.gymia.fit"})," for every gym:"]}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"DNS:"})," Add a ",(0,r.jsx)(n.strong,{children:"wildcard CNAME"}),":"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Name/host:"})," ",(0,r.jsx)(n.code,{children:"*"})," (or ",(0,r.jsx)(n.code,{children:"*.uat.gymia.fit"})," depending on provider; some use ",(0,r.jsx)(n.code,{children:"*"})," only)."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Target:"})," ",(0,r.jsx)(n.code,{children:"cname.vercel-dns.com"})," (or the CNAME target shown by Vercel for the wildcard)."]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Vercel (Gym Admin project):"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Settings \u2192 Domains \u2192 Add: ",(0,r.jsx)(n.code,{children:"*.uat.gymia.fit"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:["Vercel will issue a cert for all subdomains and route ",(0,r.jsx)(n.code,{children:"*.uat.gymia.fit"})," to this one project."]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Gym Admin app (runtime):"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Read ",(0,r.jsx)(n.code,{children:"window.location.hostname"})," (e.g. ",(0,r.jsx)(n.code,{children:"irontemple.uat.gymia.fit"}),")."]}),"\n",(0,r.jsxs)(n.li,{children:["Strip the suffix to get the gym slug (e.g. ",(0,r.jsx)(n.code,{children:"irontemple"}),")."]}),"\n",(0,r.jsxs)(n.li,{children:["Use that slug to:","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Call your API to load that gym\u2019s config/branding, and"}),"\n",(0,r.jsx)(n.li,{children:"Show the correct tenant; from here the gym owner can trigger \u201ccreate mobile app\u201d (which uses your existing per-gym APK build flow)."}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"No separate Vercel project per gym: one Gym Admin app, one wildcard domain."}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Implementation note (Gym Admin app):"})," Resolve the gym slug from the hostname so the same build serves every gym:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"// Example: irontemple.uat.gymia.fit \u2192 gymSlug = 'irontemple'\nconst hostname = typeof window !== 'undefined' ? window.location.hostname : '';\nconst baseDomain = 'uat.gymia.fit'; // or from env, e.g. VITE_APP_DOMAIN\nconst gymSlug = hostname.endsWith(`.${baseDomain}`)\n  ? hostname.slice(0, -(`.${baseDomain}`.length))\n  : null;\n// If gymSlug is null, show \"select gym\" or redirect to main domain. Otherwise load that gym's admin.\n"})}),"\n",(0,r.jsxs)(n.p,{children:["Use ",(0,r.jsx)(n.code,{children:"gymSlug"})," for API calls and for triggering the mobile app build for that gym."]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"4-optional-onboarding-on-a-subdomain",children:"4. Optional: onboarding on a subdomain"}),"\n",(0,r.jsx)(n.p,{children:"If you prefer onboarding on its own subdomain:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"DNS:"})," CNAME ",(0,r.jsx)(n.code,{children:"onboard.uat.gymia.fit"})," \u2192 ",(0,r.jsx)(n.code,{children:"cname.vercel-dns.com"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Vercel:"})," Add ",(0,r.jsx)(n.code,{children:"onboard.uat.gymia.fit"})," to the ",(0,r.jsx)(n.strong,{children:"Onboarding"})," project (or the same project that serves onboarding)."]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["Then the flow is: Landing at ",(0,r.jsx)(n.code,{children:"uat.gymia.fit"})," \u2192 redirect or link to ",(0,r.jsx)(n.code,{children:"onboard.uat.gymia.fit"})," \u2192 after creation, redirect to ",(0,r.jsx)(n.code,{children:"{gym-slug}.uat.gymia.fit"}),"."]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"5-path-based-alternative-no-wildcard",children:"5. Path-based alternative (no wildcard)"}),"\n",(0,r.jsx)(n.p,{children:"If you don\u2019t want subdomains for gyms, you can use paths:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"uat.gymia.fit"})," \u2192 Landing"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"uat.gymia.fit/onboarding"})," \u2192 Onboarding"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"uat.gymia.fit/gym/irontemple"})," \u2192 Gym admin for gym ",(0,r.jsx)(n.code,{children:"irontemple"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"uat.gymia.fit/admin"})," \u2192 Super Admin (with rewrites as in the example ",(0,r.jsx)(n.code,{children:"vercel-single-domain.example.json"}),")"]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["Then the Gym Admin app is built with a base path (e.g. ",(0,r.jsx)(n.code,{children:"/gym"}),") and the router uses a dynamic segment (e.g. ",(0,r.jsx)(n.code,{children:"/gym/:gymSlug"}),"). Same backend and \u201ccreate mobile app\u201d flow; only the URL shape changes."]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"6-mobile-app-creation-from-gym-admin",children:"6. Mobile app creation from gym admin"}),"\n",(0,r.jsxs)(n.p,{children:["From the gym admin (whether ",(0,r.jsx)(n.code,{children:"irontemple.uat.gymia.fit"})," or ",(0,r.jsx)(n.code,{children:"uat.gymia.fit/gym/irontemple"}),"):"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"The UI can offer \u201cCreate / build mobile app\u201d for that gym."}),"\n",(0,r.jsxs)(n.li,{children:["Backend or CI can run the same logic as your existing script: e.g. ",(0,r.jsx)(n.code,{children:"npm run build:mobile:uat <gym-id>"})," (with the gym slug/id for that tenant). The mobile app already points at your API (e.g. ",(0,r.jsx)(n.code,{children:"https://uat.gymia.fit"}),"); no extra domain needed for the app itself."]}),"\n",(0,r.jsx)(n.li,{children:"Optionally store the gym\u2019s branding/config in your API so the build uses the right assets and bundle id."}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["So: ",(0,r.jsx)(n.strong,{children:"one domain"})," for web (landing, onboarding, gym admin, super admin); ",(0,r.jsx)(n.strong,{children:"mobile app"})," is built per gym and uses your existing API domain."]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"7-summary",children:"7. Summary"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Need"}),(0,r.jsx)(n.th,{children:"Approach"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"One brand domain"}),(0,r.jsxs)(n.td,{children:["Use one root domain (e.g. ",(0,r.jsx)(n.code,{children:"uat.gymia.fit"}),") for all web apps."]})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Landing + onboarding"}),(0,r.jsxs)(n.td,{children:[(0,r.jsx)(n.code,{children:"uat.gymia.fit"})," + ",(0,r.jsx)(n.code,{children:"uat.gymia.fit/onboarding"})," (or ",(0,r.jsx)(n.code,{children:"onboard.uat.gymia.fit"}),")."]})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"Gym-based admin with a certain subdomain"})}),(0,r.jsxs)(n.td,{children:[(0,r.jsx)(n.strong,{children:"Wildcard"})," ",(0,r.jsx)(n.code,{children:"*.uat.gymia.fit"})," \u2192 one Gym Admin Vercel project; app resolves subdomain to gym slug and shows that tenant."]})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Super Admin"}),(0,r.jsxs)(n.td,{children:[(0,r.jsx)(n.code,{children:"admin.uat.gymia.fit"})," \u2192 Super Admin project."]})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Create mobile app from gym admin"}),(0,r.jsxs)(n.td,{children:["Same backend/API; gym admin triggers per-gym build (e.g. ",(0,r.jsx)(n.code,{children:"build:mobile:uat <gym-id>"}),"); APK uses your API domain."]})]})]})]}),"\n",(0,r.jsxs)(n.p,{children:["For the flow \u201clanding \u2192 onboarding \u2192 gym admin on a subdomain \u2192 create mobile app,\u201d the critical piece is: ",(0,r.jsx)(n.strong,{children:"one Gym Admin app"})," + ",(0,r.jsx)(n.strong,{children:"wildcard domain"})," ",(0,r.jsx)(n.code,{children:"*.uat.gymia.fit"})," + ",(0,r.jsx)(n.strong,{children:"resolve hostname to gym slug"})," in the app."]})]})}function h(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(c,{...e})}):c(e)}},8453(e,n,i){i.d(n,{R:()=>o,x:()=>t});var d=i(6540);const r={},s=d.createContext(r);function o(e){const n=d.useContext(s);return d.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function t(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:o(e.components),d.createElement(s.Provider,{value:n},e.children)}}}]);